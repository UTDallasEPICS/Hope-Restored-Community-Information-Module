datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
generator client {
  provider = "prisma-client-js"
}

model User {
  id        Int      @id @default(autoincrement())
  createdAt DateTime @default(now())
  username  String   @unique              // Unique username for login
  password  String                        // Password field
  name      String?                       // Optional name field (can be made required by removing `?`)
  role      Role     @default(ADMIN)       // Role can be USER or ADMIN
}

model Language {
  id Int              @id @default(autoincrement()) // Primary key with auto-increment
  name String
  resource Resource[]
}

model Resource {
  id          Int      @id @default(autoincrement()) // Primary key with auto-increment
  name        String
  description String
  eligibility String  // this is the criteria for which a person can be elgible for this resource
  cost        Float    // Prisma uses `Float` for double precision numbers
  locations Location[] // Backward relation to Location (One-to-many relationship)
  Demo Demographic[] 
  externalLink String
  phoneNumber PhoneNumber[]
  language Language[]
  //tags Tags[]
  groupsId    Int // Foreign key to Groups
  group      Group @relation(fields: [groupsId], references: [id])

}

//model Tags {
//  id Int                @id @default(autoincrement()) // Primary key with auto-increment
//  name String
//  resourceId Int @unique
//  resource Resource[]
//}



model Group {
  id Int              @id @default(autoincrement()) // Primary key with auto-increment
  name String         @unique
  resource Resource[]
}

model Demographic{
  id Int                @id @default(autoincrement()) // Primary key with auto-increment
  name String
  resource Resource[]
}



model PhoneNumber {
  id Int                    @id @default(autoincrement()) // Primary key with auto-increment
  number Int
  type String
  resourceId Int
  resource Resource @relation(fields: [resourceId], references: [id], onDelete: Cascade)
  personalId Int @unique
  personal personal @relation(fields: [personalId], references: [id])
}

model personal {
  id Int                @id @default(autoincrement()) // Primary key with auto-increment
  name String
  description String
  phoneNumbers PhoneNumber[]
}

model Location {
  id           Int       @id @default(autoincrement()) // Primary key
  addressLine1 String
  addressLine2 String
  city         String
  state        String
  postalCode   String    // Changed from PostalLink Int to String for clarity
  country      String
  longitude    Float     // Changed from Int to Float
  latitude     Float     // Changed from Int to Float
  resourceId   Int       // Foreign key
  resource     Resource @relation(fields: [resourceId], references: [id], onDelete: Cascade)

  
}

enum Role {
  ADMIN    // Admin user
}